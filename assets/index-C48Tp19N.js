var q=Object.defineProperty;var P=(i,e,t)=>e in i?q(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var S=(i,e,t)=>P(i,typeof e!="symbol"?e+"":e,t);import{P as h}from"./menu-CszY2JC7.js";import{autoInitDialogs as M,closeDialog as X,openDialog as D,createDialog as x,pm7Confirm as I,pm7Alert as k,PM7Dialog as w}from"./dialog-DICfvtvK.js";import{a as O,c as _,s as H,P as B}from"./toast-wOCbaTB3.js";import{PM7TabSelector as c}from"./tab-selector-DNXWfa90.js";import{i as C,P as u}from"./tooltip-D3cTCXV0.js";import{P as m}from"./accordion-DIc5WzAF.js";import{P as T}from"./theme-switch-DMBz-S8n.js";class y{constructor(e){this.element=e,this.init()}init(){(this.element.classList.contains("pm7-button--primary")||this.element.classList.contains("pm7-button--default"))&&this.add6StarsEffect(),this.element.classList.contains("pm7-button--slider")&&this.initSlider()}add6StarsEffect(){const e=document.createElement("div");e.className="pm7-button__6stars";for(let t=0;t<6;t++){const n=document.createElement("span");n.className="star",e.appendChild(n)}this.element.appendChild(e)}initSlider(){this.handle=this.element.querySelector(".pm7-button--slider-handle"),this.text=this.element.querySelector(".pm7-button--slider-text"),this.handle&&(this.isDragging=!1,this.startX=0,this.currentX=0,this.handleX=0,this.maxX=0,this.threshold=.95,this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handle.addEventListener("mousedown",this.handleMouseDown),this.handle.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),this.updateMaxPosition(),window.addEventListener("resize",()=>this.updateMaxPosition()))}updateMaxPosition(){const e=this.element.offsetWidth,t=this.handle.offsetWidth;this.maxX=e-t-8}handleMouseDown(e){this.element.disabled||this.element.hasAttribute("data-pm7-slider-complete")||(this.isDragging=!0,this.startX=e.clientX-this.handleX,this.element.setAttribute("data-pm7-slider-dragging","true"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),e.preventDefault())}handleTouchStart(e){if(this.element.disabled||this.element.hasAttribute("data-pm7-slider-complete"))return;const t=e.touches[0];this.isDragging=!0,this.startX=t.clientX-this.handleX,this.element.setAttribute("data-pm7-slider-dragging","true"),document.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),document.addEventListener("touchend",this.handleTouchEnd),e.preventDefault()}handleMouseMove(e){this.isDragging&&(this.currentX=e.clientX-this.startX,this.updateHandlePosition())}handleTouchMove(e){if(!this.isDragging)return;const t=e.touches[0];this.currentX=t.clientX-this.startX,this.updateHandlePosition(),e.preventDefault()}updateHandlePosition(){this.handleX=Math.max(0,Math.min(this.currentX,this.maxX)),this.handle.style.transform=`translateX(${this.handleX}px)`,this.handleX/this.maxX>=this.threshold&&this.complete()}handleMouseUp(){this.endDrag(),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)}handleTouchEnd(){this.endDrag(),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd)}endDrag(){if(!this.isDragging)return;this.isDragging=!1,this.element.removeAttribute("data-pm7-slider-dragging"),this.handleX/this.maxX<this.threshold&&!this.element.hasAttribute("data-pm7-slider-complete")&&(this.handleX=0,this.handle.style.transform="translateX(0)")}complete(){this.element.hasAttribute("data-pm7-slider-complete")||(this.handleX=this.maxX,this.handle.style.transform=`translateX(${this.maxX}px)`,this.element.setAttribute("data-pm7-slider-complete","true"),this.element.dispatchEvent(new CustomEvent("pm7:slider:complete",{bubbles:!0,detail:{button:this.element}})),setTimeout(()=>{this.element.click()},300))}reset(){this.handleX=0,this.handle.style.transform="translateX(0)",this.element.removeAttribute("data-pm7-slider-complete"),this.element.removeAttribute("data-pm7-slider-dragging")}}function E(){document.querySelectorAll(".pm7-button--primary, .pm7-button--default").forEach(i=>{i.querySelector(".pm7-button__6stars")||new y(i)}),document.querySelectorAll(".pm7-button--slider").forEach(i=>{i.PM7Button||(i.PM7Button=new y(i))})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E());const d=class d{constructor(e){const t=e.hasAttribute("data-pm7-initialized"),n=d.instances.has(e);if(t&&!n&&(console.log("[PM7Sidebar] Self-healing: Re-initializing sidebar after framework re-render"),e.removeAttribute("data-pm7-initialized")),d.instances.has(e))return d.instances.get(e);this.element=e,this.isOpen=!1,this.overlay=null,this.triggers=[],this.closeButton=null,this.pushElement=null,this.position="left",this.mode="overlay",this.eventListeners=new Map;const a=this.preserveState();d.instances.set(e,this),e._pm7SidebarInstance=this,this.init(),a&&a.wasOpen&&this.restoreState(a),e.setAttribute("data-pm7-initialized","true")}preserveState(){const e=this.element.classList.contains("pm7-sidebar--open")||this.element.dataset.state==="open",t=this.element.querySelectorAll(".pm7-sidebar-collapsible"),n=[];return t.forEach((a,o)=>{n.push({index:o,isOpen:a.dataset.state==="open"})}),{wasOpen:e,collapsibleStates:n,position:this.element.classList.contains("pm7-sidebar--right")?"right":"left"}}restoreState(e){e.wasOpen&&this.mode!=="static"&&setTimeout(()=>{this.open()},50);const t=this.element.querySelectorAll(".pm7-sidebar-collapsible");e.collapsibleStates.forEach(({index:n,isOpen:a})=>{const o=t[n];if(o){o.dataset.state=a?"open":"closed";const l=o.querySelector(".pm7-sidebar-collapsible-trigger"),p=o.querySelector(".pm7-sidebar-collapsible-content");l&&l.setAttribute("aria-expanded",a),p&&p.setAttribute("aria-hidden",!a)}})}cleanup(){this.eventListeners.forEach(({element:e,type:t,handler:n})=>{e.removeEventListener(t,n)}),this.eventListeners.clear()}init(){this.isOpen=this.element.classList.contains("pm7-sidebar--open")||this.element.dataset.state==="open",this.position=this.element.classList.contains("pm7-sidebar--right")?"right":"left",this.element.classList.contains("pm7-sidebar--static")?this.mode="static":document.querySelector(".pm7-sidebar-push")&&(this.mode="push",this.pushElement=document.querySelector(".pm7-sidebar-push")),this.mode==="overlay"&&this.createOverlay(),this.setupTriggers(),this.setupCloseButton(),this.setupKeyboardNavigation(),this.setupCollapsibles(),this.handleEscapeKey(),this.updateAriaAttributes()}createOverlay(){this.overlay=document.createElement("div"),this.overlay.className="pm7-sidebar-overlay",this.overlay.setAttribute("aria-hidden","true"),this.element.parentNode.insertBefore(this.overlay,this.element.nextSibling),this.overlay.addEventListener("click",()=>this.close())}setupTriggers(){const e=this.element.id;e&&(this.triggers=document.querySelectorAll(`[data-pm7-sidebar-trigger="${e}"]`)),this.element.hasAttribute("data-pm7-sidebar")&&document.querySelectorAll("[data-pm7-sidebar-trigger]").forEach(n=>{n.dataset.pm7SidebarTrigger||(this.triggers=[...this.triggers,n])}),this.triggers.forEach((t,n)=>{const a=o=>{o.preventDefault(),this.toggle()};t.addEventListener("click",a),this.eventListeners.set(`trigger-click-${n}`,{element:t,type:"click",handler:a}),t.setAttribute("aria-controls",e||""),t.setAttribute("aria-expanded",this.isOpen)})}setupCloseButton(){if(this.closeButton=this.element.querySelector(".pm7-sidebar-close"),this.closeButton){const e=()=>this.close();this.closeButton.addEventListener("click",e),this.eventListeners.set("close-click",{element:this.closeButton,type:"click",handler:e}),this.closeButton.setAttribute("aria-label","Close sidebar")}}setupKeyboardNavigation(){const e=this.element.querySelectorAll(".pm7-sidebar-item");e.forEach((t,n)=>{t.setAttribute("tabindex","0"),t.addEventListener("keydown",a=>{switch(a.key){case"ArrowDown":a.preventDefault(),(e[n+1]||e[0]).focus();break;case"ArrowUp":a.preventDefault(),(e[n-1]||e[e.length-1]).focus();break;case"Home":a.preventDefault(),e[0].focus();break;case"End":a.preventDefault(),e[e.length-1].focus();break}})})}setupCollapsibles(){this.element.querySelectorAll(".pm7-sidebar-collapsible").forEach(t=>{const n=t.querySelector(".pm7-sidebar-collapsible-trigger"),a=t.querySelector(".pm7-sidebar-collapsible-content");if(n&&a){const o=t.dataset.state==="open";n.setAttribute("aria-expanded",o),a.setAttribute("aria-hidden",!o),n.addEventListener("click",()=>{const l=t.dataset.state==="open";t.dataset.state=l?"closed":"open",n.setAttribute("aria-expanded",!l),a.setAttribute("aria-hidden",l),this.element.dispatchEvent(new CustomEvent("pm7:sidebar:collapsible:toggle",{detail:{collapsible:t,isOpen:!l},bubbles:!0}))})}})}handleEscapeKey(){const e=t=>{t.key==="Escape"&&this.isOpen&&this.mode!=="static"&&this.close()};document.addEventListener("keydown",e),this.eventListeners.set("escape-key",{element:document,type:"keydown",handler:e})}open(){this.isOpen||this.mode==="static"||(this.isOpen=!0,this.element.classList.add("pm7-sidebar--open"),this.element.dataset.state="open",this.overlay&&this.overlay.classList.add("pm7-sidebar-overlay--visible"),this.pushElement&&(this.pushElement.classList.add("pm7-sidebar-push--active"),this.position==="right"&&this.pushElement.classList.add("pm7-sidebar-push--right")),this.updateAriaAttributes(),this.element.setAttribute("tabindex","-1"),this.element.focus(),this.trapFocus(),this.element.dispatchEvent(new CustomEvent("pm7:sidebar:open",{detail:{sidebar:this},bubbles:!0})))}close(){if(!this.isOpen||this.mode==="static")return;this.isOpen=!1,this.element.classList.remove("pm7-sidebar--open"),this.element.dataset.state="closed",this.overlay&&this.overlay.classList.remove("pm7-sidebar-overlay--visible"),this.pushElement&&this.pushElement.classList.remove("pm7-sidebar-push--active"),this.updateAriaAttributes(),this.releaseFocusTrap();const e=document.activeElement;this.triggers.length&&!this.triggers.includes(e)&&this.triggers[0].focus(),this.element.dispatchEvent(new CustomEvent("pm7:sidebar:close",{detail:{sidebar:this},bubbles:!0}))}toggle(){this.isOpen?this.close():this.open()}updateAriaAttributes(){this.element.setAttribute("aria-hidden",!this.isOpen),this.triggers.forEach(e=>{e.setAttribute("aria-expanded",this.isOpen)}),this.overlay&&this.overlay.setAttribute("aria-hidden",!this.isOpen)}trapFocus(){const e=this.element.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select, [tabindex]:not([tabindex="-1"])'),t=e[0],n=e[e.length-1];this.focusTrapHandler=a=>{a.key==="Tab"&&(a.shiftKey?document.activeElement===t&&(a.preventDefault(),n.focus()):document.activeElement===n&&(a.preventDefault(),t.focus()))},this.element.addEventListener("keydown",this.focusTrapHandler)}releaseFocusTrap(){this.focusTrapHandler&&(this.element.removeEventListener("keydown",this.focusTrapHandler),this.focusTrapHandler=null)}destroy(){this.cleanup(),this.overlay&&this.overlay.remove(),this.releaseFocusTrap(),this.element.classList.remove("pm7-sidebar--open"),this.element.removeAttribute("data-pm7-initialized"),d.instances.delete(this.element),delete this.element._pm7SidebarInstance,delete this.element.PM7Sidebar}};S(d,"instances",new WeakMap);let r=d;function F(){document.querySelectorAll("[data-pm7-sidebar][data-pm7-initialized]:not([data-pm7-sidebar-healing])").forEach(e=>{(!e._pm7SidebarInstance||!r.instances.has(e))&&(e.setAttribute("data-pm7-sidebar-healing","true"),console.log("[PM7Sidebar] Healing sidebar:",e),new r(e),e.removeAttribute("data-pm7-sidebar-healing"))})}function L(){document.querySelectorAll("[data-pm7-sidebar]:not([data-pm7-initialized])").forEach(t=>{new r(t)}),document.querySelectorAll("[data-pm7-sidebar-trigger]").forEach(t=>{const n=t.dataset.pm7SidebarTrigger;if(n){const a=document.getElementById(n);a&&!a._pm7SidebarInstance&&!a.hasAttribute("data-pm7-initialized")&&new r(a)}})}r.heal=F;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",L):L();function b(){document.querySelectorAll("[data-pm7-menu][data-pm7-menu-initialized]:not([data-pm7-menu-healing])").forEach(e=>{(!e._pm7MenuInstance||!h.instances.has(e))&&(e.setAttribute("data-pm7-menu-healing","true"),console.log("[PM7Menu] Healing menu:",e),new h(e),e.removeAttribute("data-pm7-menu-healing"))})}function f(){document.querySelectorAll("[data-pm7-accordion][data-pm7-accordion-initialized]:not([data-pm7-accordion-healing])").forEach(e=>{(!e._pm7AccordionInstance||!m.instances.has(e))&&(e.setAttribute("data-pm7-accordion-healing","true"),console.log("[PM7Accordion] Healing accordion:",e),m.autoInit(),e.removeAttribute("data-pm7-accordion-healing"))})}function g(){document.querySelectorAll("[data-pm7-tab-selector][data-pm7-tab-initialized]:not([data-pm7-tab-healing])").forEach(e=>{(!e._pm7TabSelectorInstance||!c.instances.has(e))&&(e.setAttribute("data-pm7-tab-healing","true"),console.log("[PM7TabSelector] Healing tab selector:",e),new c(e),e.removeAttribute("data-pm7-tab-healing"))})}function v(){document.querySelectorAll("[data-pm7-tooltip][data-pm7-tooltip-initialized]:not([data-pm7-tooltip-healing])").forEach(e=>{(!e._pm7TooltipInstance||!u.instances.has(e))&&(e.setAttribute("data-pm7-tooltip-healing","true"),console.log("[PM7Tooltip] Healing tooltip:",e),new u(e),e.removeAttribute("data-pm7-tooltip-healing"))})}function A(){document.querySelectorAll("[data-pm7-sidebar][data-pm7-initialized]:not([data-pm7-sidebar-healing])").forEach(e=>{(!e._pm7SidebarInstance||!r.instances.has(e))&&(e.setAttribute("data-pm7-sidebar-healing","true"),console.log("[PM7Sidebar] Healing sidebar:",e),new r(e),e.removeAttribute("data-pm7-sidebar-healing"))})}const z={init(i=document,e={}){console.log("[PM7] Initializing all components...");const{delay:t=0,force:n=!1,heal:a=!0}=e,o=()=>{n&&(i.querySelectorAll("[data-pm7-menu-initialized]").forEach(s=>s.removeAttribute("data-pm7-menu-initialized")),i.querySelectorAll("[data-pm7-dialog-initialized]").forEach(s=>s.removeAttribute("data-pm7-dialog-initialized")),i.querySelectorAll("[data-pm7-tab-initialized]").forEach(s=>s.removeAttribute("data-pm7-tab-initialized")),i.querySelectorAll("[data-pm7-tooltip-initialized]").forEach(s=>s.removeAttribute("data-pm7-tooltip-initialized")),i.querySelectorAll("[data-pm7-accordion-initialized]").forEach(s=>s.removeAttribute("data-pm7-accordion-initialized")),i.querySelectorAll("[data-pm7-theme-switch-initialized]").forEach(s=>s.removeAttribute("data-pm7-theme-switch-initialized")),i.querySelectorAll("[data-pm7-initialized]").forEach(s=>s.removeAttribute("data-pm7-initialized"))),i.querySelectorAll("[data-pm7-menu]:not([data-pm7-menu-initialized])").forEach(s=>{new h(s),s.setAttribute("data-pm7-menu-initialized","true")}),M(),i.querySelectorAll("[data-pm7-dialog]:not([data-pm7-dialog-initialized])").forEach(s=>{new w(s),s.setAttribute("data-pm7-dialog-initialized","true")}),E(),i.querySelectorAll("[data-pm7-tab-selector]:not([data-pm7-tab-initialized])").forEach(s=>{new c(s),s.setAttribute("data-pm7-tab-initialized","true")}),i.querySelectorAll("[data-pm7-tooltip]:not([data-pm7-tooltip-initialized])").forEach(s=>{!s.classList.contains("pm7-tooltip-trigger")&&!s.classList.contains("pm7-tooltip-content")&&new u(s)}),i.querySelectorAll("[data-pm7-accordion]:not([data-pm7-accordion-initialized])").forEach(s=>{new m(s),s.setAttribute("data-pm7-accordion-initialized","true")}),i.querySelectorAll("[data-pm7-theme-switch]:not([data-pm7-theme-switch-initialized])").forEach(s=>{new T(s),s.setAttribute("data-pm7-theme-switch-initialized","true")}),i.querySelectorAll("[data-pm7-sidebar]:not([data-pm7-initialized])").forEach(s=>{new r(s),s.setAttribute("data-pm7-initialized","true")}),a&&(b(),f(),g(),v(),A()),console.log("[PM7] All components initialized")};t>0?setTimeout(o,t):o()},initFramework(i=document){return this.init(i,{delay:50,heal:!0})},reinit(i=document){return console.log("[PM7] Re-initializing all components..."),this.init(i,{force:!0,heal:!0})},Menu:h,Dialog:w,Button:y,Toast:B,TabSelector:c,Tooltip:u,Accordion:m,ThemeSwitch:T,Sidebar:r,showToast:H,closeToast:_,closeAllToasts:O,alert:k,confirm:I,createDialog:x,openDialog:D,closeDialog:X,autoInitDialogs:M,initTooltips:C,healMenus:b,healAccordions:f,healTabSelectors:g,healTooltips:v,healSidebars:A,heal(){b(),f(),g(),v(),A()}};typeof window<"u"&&(window.PM7=z,window.__PM7_SELF_HEALING_INTERVAL__||(window.__PM7_SELF_HEALING_INTERVAL__=setInterval(()=>{z.heal()},1e3)));
