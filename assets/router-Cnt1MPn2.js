import{PM7TabSelector as h}from"./tab-selector-DNXWfa90.js";import{P as g}from"./accordion-DIc5WzAF.js";import{openDialog as y,closeDialog as b}from"./dialog-DICfvtvK.js";import{P as M}from"./menu-CszY2JC7.js";import{s as S,c as P,a as A}from"./toast-wOCbaTB3.js";import{P as T,i as C}from"./tooltip-D3cTCXV0.js";window.PM7TabSelector=h;window.PM7Accordion=g;window.openDialog=y;window.closeDialog=b;window.PM7Menu=M;window.showToast=S;window.closeToast=P;window.closeAllToasts=A;window.PM7Tooltip=T;window.initTooltips=C;class v{constructor(){this.currentComponent=null,this.isNavigating=!1,this.init()}init(){const e=window.location.pathname,n=e.split("/");e==="/faq.html"?this.currentComponent="faq":n[1]==="components"&&n[2]&&(this.currentComponent=n[2]),window.addEventListener("popstate",o=>{o.state&&o.state.component&&this.navigateToComponent(o.state.component,o.state.tab,!1)})}async navigateToComponent(e,n=null,o=!0){if(!this.isNavigating&&!(e===this.currentComponent&&!n)){this.isNavigating=!0;try{let i,s=null;e==="faq"?i="/faq.html":(s=n||localStorage.getItem("pm7-docs-last-tab")||"documentation",i=`/components/${e}.html?tab=${s}`),console.log("[Router] Navigating to:",e,"tab:",s,"url:",i);const p=await fetch(i);if(!p.ok)throw new Error("Failed to fetch page");const u=await p.text(),c=new DOMParser().parseFromString(u,"text/html"),d=c.querySelector(".pm7-docs-content");if(!d)throw new Error("Content not found");const m=Array.from(d.querySelectorAll("script")),E=Array.from(c.querySelectorAll('link[rel="stylesheet"]')),l=document.querySelector(".pm7-docs-content");if(l){if(document.body.classList.add("pm7-navigating"),l.innerHTML=d.innerHTML,document.title=c.title,await(async()=>{for(const t of m)if(t.src)(t.src.includes("tab-router.js")||t.type==="module")&&await new Promise(r=>{const a=document.createElement("script");a.src=t.src,a.type=t.type||"text/javascript",a.onload=r,a.onerror=r,document.body.appendChild(a)});else if(t.textContent.trim())try{const r=document.createElement("script");r.textContent=t.textContent,r.type=t.type||"text/javascript",document.body.appendChild(r),document.body.removeChild(r)}catch(r){console.error("[Router] Script execution error:",r)}})(),l.querySelectorAll("[data-pm7-tab-selector]:not([data-pm7-tab-selector-initialized])").forEach(t=>{window.PM7TabSelector&&(new window.PM7TabSelector(t),t.setAttribute("data-pm7-tab-selector-initialized","true"))}),l.querySelectorAll("[data-pm7-accordion]").forEach(t=>{if(window.PM7Accordion&&!t.PM7Accordion){const r=t.getAttribute("data-allow-multiple")==="true",a=t.getAttribute("data-default-open"),w=t.getAttribute("data-icon-position")||"end",f=t.getAttribute("data-text-align")||"left";t.PM7Accordion=new window.PM7Accordion(t,{allowMultiple:r,defaultOpen:a==="all"?"all":parseInt(a),iconPosition:w,textAlign:f})}}),l.querySelectorAll("[data-pm7-menu]:not([data-pm7-menu-initialized])").forEach(t=>{window.PM7Menu&&(new window.PM7Menu(t),t.setAttribute("data-pm7-menu-initialized","true"))}),window.initTooltips&&window.initTooltips(),window.initTabRouter&&e!=="faq"&&window.initTabRouter(e),this.currentComponent=e,o){let t;e==="faq"?(t="/faq.html",history.pushState({component:e},"",t)):(t=`/components/${e}/${s}`,history.pushState({component:e,tab:s},"",t))}this.updateSidebarActiveState(e),document.body.classList.remove("pm7-navigating")}}catch(i){console.error("[Router] Navigation error:",i),document.body.classList.remove("pm7-navigating"),window.location.href=`/components/${e}.html`}finally{this.isNavigating=!1}}}updateSidebarActiveState(e){document.querySelectorAll(".pm7-docs-sidebar .pm7-button").forEach(o=>{const i=o.getAttribute("href");i==="/faq.html"?e==="faq"?(o.style.backgroundColor="var(--pm7-primary)",o.style.color="var(--pm7-primary-foreground)"):(o.style.backgroundColor="",o.style.color=""):i&&i.includes("/components/")&&(i.split("/")[2]===e?(o.style.backgroundColor="var(--pm7-primary)",o.style.color="var(--pm7-primary-foreground)"):(o.style.backgroundColor="",o.style.color=""))})}interceptLinkClick(e,n,o=null){e.preventDefault(),e.stopPropagation(),this.navigateToComponent(n,o)}}window.PM7Router=new v;export{v as default};
